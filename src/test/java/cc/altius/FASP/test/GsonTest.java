/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package cc.altius.FASP.test;

import cc.altius.FASP.model.DatasetData;
import cc.altius.FASP.model.EmptyDoubleTypeAdapter;
import cc.altius.FASP.model.EmptyIntegerTypeAdapter;
import com.google.gson.GsonBuilder;
import com.google.gson.reflect.TypeToken;

/**
 *
 * @author akil
 */
public class GsonTest {

    public static void main(String[] args) {
        String json = "{\"programId\":2558,\"programCode\":\"BWA-ARV-MOH\",\"realmCountry\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":false,\"realmCountryId\":6,\"country\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":false,\"countryId\":34,\"countryCode\":\"BWA\",\"countryCode2\":\"BW\",\"label\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":true,\"labelId\":236,\"label_en\":\"Botswana\",\"label_sp\":null,\"label_fr\":null,\"label_pr\":null},\"currency\":null},\"realm\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":false,\"realmId\":1,\"label\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":true,\"labelId\":4,\"label_en\":\"Global Health\",\"label_sp\":\"Salud Global\",\"label_fr\":\"Santé Globale\",\"label_pr\":\"Saúde Global\"},\"realmCode\":\"GHR\",\"defaultRealm\":false,\"minMosMinGaurdrail\":1,\"minMosMaxGaurdrail\":1,\"maxMosMaxGaurdrail\":9999,\"minQplTolerance\":2,\"minQplToleranceCutOff\":5,\"maxQplTolerance\":2},\"defaultCurrency\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":false,\"currencyId\":1,\"currencyCode\":\"USD\",\"label\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":true,\"labelId\":5,\"label_en\":\"US Dollar\",\"label_sp\":\"Dólar americano\",\"label_fr\":\"Dollar américain\",\"label_pr\":\"Dólar Americano\"},\"conversionRateToUsd\":1,\"isSync\":true}},\"organisation\":{\"id\":1,\"label\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":true,\"labelId\":39,\"label_en\":\"Ministry of Health\",\"label_sp\":null,\"label_fr\":null,\"label_pr\":null},\"code\":\"MOH\",\"idString\":\"1\"},\"healthAreaList\":[{\"id\":1,\"label\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":true,\"labelId\":36,\"label_en\":\"Antiretrovirals\",\"label_sp\":\"Antirretrovirales\",\"label_fr\":\"Antiretroviraux\",\"label_pr\":\"Anti-retrovirais\"},\"code\":\"ARV\",\"idString\":\"1\"}],\"label\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":true,\"labelId\":34838,\"label_en\":\"Botswana - ARV\",\"label_sp\":\"\",\"label_fr\":\"\",\"label_pr\":\"\"},\"programManager\":{\"userId\":9,\"username\":\"Akil M\"},\"programNotes\":\"\",\"regionList\":[{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":false,\"regionId\":54,\"label\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":true,\"labelId\":28209,\"label_en\":\"National\",\"label_sp\":\"Nacional\",\"label_fr\":\"Nationale\",\"label_pr\":\"Nacional\"},\"realmCountry\":null,\"gln\":null,\"capacityCbm\":0}],\"currentVersion\":{\"versionId\":1,\"versionType\":{\"id\":\"1\"},\"versionStatus\":{\"id\":1,\"label\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":true,\"labelId\":12,\"label_en\":\"Pending Approval\",\"label_sp\":\"Pendiente de apobación\",\"label_fr\":\"En attente d'approbation\",\"label_pr\":\"Pendente de aprovação\"},\"idString\":\"1\"},\"notes\":\"\",\"createdBy\":{\"userId\":9,\"username\":\"Akil M\"},\"lastModifiedBy\":{\"userId\":9,\"username\":\"Akil M\"},\"createdDate\":\"2022-01-20 09:18:14\",\"lastModifiedDate\":\"2022-01-20 09:18:14\",\"forecastStartDate\":\"2022-01-01 00:00:00\",\"forecastStopDate\":\"2024-12-01 00:00:00\",\"daysInMonth\":null,\"freightPerc\":null,\"forecastThresholdHighPerc\":null,\"forecastThresholdLowPerc\":null},\"versionList\":[{\"versionId\":1,\"versionType\":{\"id\":1,\"label\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":true,\"labelId\":10,\"label_en\":\"Draft Version\",\"label_sp\":\"Versión preliminar\",\"label_fr\":\"Version draft\",\"label_pr\":\"Versão preliminar\"},\"idString\":\"1\"},\"versionStatus\":{\"id\":1,\"label\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":true,\"labelId\":12,\"label_en\":\"Pending Approval\",\"label_sp\":\"Pendiente de apobación\",\"label_fr\":\"En attente d'approbation\",\"label_pr\":\"Pendente de aprovação\"},\"idString\":\"1\"},\"notes\":\"\",\"createdBy\":{\"userId\":9,\"username\":\"Akil M\"},\"lastModifiedBy\":{\"userId\":9,\"username\":\"Akil M\"},\"createdDate\":\"2022-01-20 09:18:14\",\"lastModifiedDate\":\"2022-01-20 09:18:14\",\"forecastStartDate\":\"2022-01-01 00:00:00\",\"forecastStopDate\":\"2024-12-01 00:00:00\",\"daysInMonth\":null,\"freightPerc\":null,\"forecastThresholdHighPerc\":null,\"forecastThresholdLowPerc\":null},{\"versionId\":2,\"versionType\":{\"id\":1,\"label\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":true,\"labelId\":10,\"label_en\":\"Draft Version\",\"label_sp\":\"Versión preliminar\",\"label_fr\":\"Version draft\",\"label_pr\":\"Versão preliminar\"},\"idString\":\"1\"},\"versionStatus\":{\"id\":2,\"label\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":true,\"labelId\":13,\"label_en\":\"Approved\",\"label_sp\":\"Aprobado\",\"label_fr\":\"Approuvé\",\"label_pr\":\"Aprovado\"},\"idString\":\"2\"},\"notes\":\"\",\"createdBy\":{\"userId\":9,\"username\":\"Akil M\"},\"lastModifiedBy\":{\"userId\":9,\"username\":\"Akil M\"},\"createdDate\":\"2022-01-20 09:19:36\",\"lastModifiedDate\":\"2022-01-20 09:19:36\",\"forecastStartDate\":\"2022-01-01 00:00:00\",\"forecastStopDate\":\"2024-12-01 00:00:00\",\"daysInMonth\":0,\"freightPerc\":5,\"forecastThresholdHighPerc\":25,\"forecastThresholdLowPerc\":5},{\"versionId\":3,\"versionType\":{\"id\":1,\"label\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":true,\"labelId\":10,\"label_en\":\"Draft Version\",\"label_sp\":\"Versión preliminar\",\"label_fr\":\"Version draft\",\"label_pr\":\"Versão preliminar\"},\"idString\":\"1\"},\"versionStatus\":{\"id\":2,\"label\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":true,\"labelId\":13,\"label_en\":\"Approved\",\"label_sp\":\"Aprobado\",\"label_fr\":\"Approuvé\",\"label_pr\":\"Aprovado\"},\"idString\":\"2\"},\"notes\":\"\",\"createdBy\":{\"userId\":9,\"username\":\"Akil M\"},\"lastModifiedBy\":{\"userId\":9,\"username\":\"Akil M\"},\"createdDate\":\"2022-01-20 09:22:12\",\"lastModifiedDate\":\"2022-01-20 09:22:12\",\"forecastStartDate\":\"2022-01-01 00:00:00\",\"forecastStopDate\":\"2024-12-01 00:00:00\",\"daysInMonth\":0,\"freightPerc\":5,\"forecastThresholdHighPerc\":25,\"forecastThresholdLowPerc\":5},{\"versionId\":4,\"versionType\":{\"id\":1,\"label\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":true,\"labelId\":10,\"label_en\":\"Draft Version\",\"label_sp\":\"Versión preliminar\",\"label_fr\":\"Version draft\",\"label_pr\":\"Versão preliminar\"},\"idString\":\"1\"},\"versionStatus\":{\"id\":2,\"label\":{\"createdBy\":null,\"createdDate\":null,\"lastModifiedBy\":null,\"lastModifiedDate\":null,\"active\":true,\"labelId\":13,\"label_en\":\"Approved\",\"label_sp\":\"Aprobado\",\"label_fr\":\"Approuvé\",\"label_pr\":\"Aprovado\"},\"idString\":\"2\"},\"notes\":\"\",\"createdBy\":{\"userId\":9,\"username\":\"Akil M\"},\"lastModifiedBy\":{\"userId\":9,\"username\":\"Akil M\"},\"createdDate\":\"2022-01-20 09:23:23\",\"lastModifiedDate\":\"2022-01-20 09:23:23\",\"forecastStartDate\":\"2022-01-01 00:00:00\",\"forecastStopDate\":\"2024-12-01 00:00:00\",\"daysInMonth\":0,\"freightPerc\":5,\"forecastThresholdHighPerc\":25,\"forecastThresholdLowPerc\":5}],\"treeList\":[{\"treeId\":1,\"active\":true,\"forecastMethod\":{\"id\":\"1\",\"label\":{\"label_en\":\"Morbidity\"}},\"label\":{\"label_en\":\"Part 1\"},\"notes\":\"\",\"regionList\":[{\"id\":54,\"label\":{\"label_en\":\"National\"}}],\"scenarioList\":[{\"id\":1,\"label\":{\"label_en\":\"Default\"},\"active\":true,\"notes\":\"\"}],\"tree\":{\"flatList\":[{\"id\":1,\"level\":0,\"parent\":null,\"sortOrder\":\"00\",\"payload\":{\"label\":{\"label_en\":\"\"},\"nodeType\":{\"id\":2},\"nodeUnit\":{\"id\":\"\"},\"nodeDataMap\":{\"1\":[{\"notes\":\"\",\"month\":\"2022-01-01\",\"dataValue\":\"\",\"calculatedDataValue\":\"\",\"displayDataValue\":\"\",\"nodeDataModelingList\":[],\"nodeDataOverrideList\":[],\"nodeDataMomList\":[],\"fuNode\":{\"noOfForecastingUnitsPerPerson\":\"\",\"usageFrequency\":\"\",\"forecastingUnit\":{\"label\":{\"label_en\":\"\"},\"tracerCategory\":{},\"unit\":{\"id\":\"\"}},\"usageType\":{\"id\":\"\"},\"usagePeriod\":{\"usagePeriodId\":\"\"},\"repeatUsagePeriod\":{},\"noOfPersons\":\"\"},\"puNode\":{\"planningUnit\":{\"unit\":{}},\"refillMonths\":\"\"},\"displayCalculatedDataValue\":\"\"}]}},\"parentItem\":{\"payload\":{\"nodeUnit\":{}}}}]}}],\"actualConsumptionList\":[],\"consumptionExtrapolation\":[],\"planningUnitList\":[],\"actionList\":[]}";
        System.out.println(json);
        System.out.println("json length original=" + json.length());
        String emptyFuNodeString1 = "\"fuNode\":{\"noOfForecastingUnitsPerPerson\":\"\",\"usageFrequency\":\"\",\"forecastingUnit\":{\"label\":{\"label_en\":\"\"},\"tracerCategory\":{},\"unit\":{\"id\":\"\"}},\"usageType\":{\"id\":\"\"},\"usagePeriod\":{\"usagePeriodId\":\"\"},\"repeatUsagePeriod\":{},\"noOfPersons\":\"\"}";
        json = json.replace(emptyFuNodeString1, "\"fuNode\": null");
        json = json.replace(",,", ",");
        System.out.println("json length after replace fuNode1 =" + json.length());
        String emptyPuNodeString1 = "\"puNode\":{\"planningUnit\":{\"unit\":{}},\"refillMonths\":\"\"}";
        json = json.replace(emptyPuNodeString1, "\"puNode\": null");
        json = json.replace(",,", ",");
        System.out.println("json length after replacing puNode1 =" + json.length());
        System.out.println(json);
        GsonBuilder gsonBuilder = new GsonBuilder()
                .registerTypeAdapter(Double.class, new EmptyDoubleTypeAdapter())
                .registerTypeAdapter(Integer.class, new EmptyIntegerTypeAdapter())
                .setLenient()
                .setDateFormat("yyyy-MM-dd HH:mm:ss");
        DatasetData data = gsonBuilder.create().fromJson(json, new TypeToken<DatasetData>() {
        }.getType());
        System.out.println(data.getProgramId());
    }

}
